<!DOCTYPE html>
{% load compress %}

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <title>{% block title %}Protect America Intranet{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        {% compress css %}
            {% block stylesheets %}
                <link type="text/less" rel="stylesheet" href="{% static "less/style.less" %}">
            {% endblock %}
        {% endcompress %}

        <link rel="shortcut icon" href="{% static "images/favicon.ico" %}">
        {% include 'knockout_templates.html' %}
    </head>
    <body>
        {% block content %}
        {% endblock %}



        {% compress js %}

        {% block javascript_libs %}
        <script type="text/javascript" src="{% static 'js/jquery-1.10.1.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/undrescore-1.5.2.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/knockout-3.0.0.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/jquery.cookie-1.3.1.min.js' %}"></script>
        {% endblock %}

        {% block javascript_variables_nocompress %}{% endblock %}
        {% block javascript_nocompress %}{% endblock %}




        <script type="text/javascript">
            /* CSRF from cookie? */
            $(function(){
                // https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax
                function csrfSafeMethod(method) {
                    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
                }

                $.ajaxSetup({
                    crossDomain: false,
                    cache: false,
                    beforeSend: function(xhr, settings) {
                        if (!csrfSafeMethod(settings.type)) {
                            xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken'));
                        }
                    }
                });
            });
        </script>


        {% block javascript_compress %}

        {% endblock %}

        {% endcompress %}

    </body>
</html>
